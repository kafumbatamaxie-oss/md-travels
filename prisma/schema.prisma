generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

/**
 * ================= VEHICLES =================
 */

model Vehicle {
  id         String @id @default(cuid())
  name       String
  brand      String
  category   String
  passengers Int

  // Pricing
  perKmRate  Float?
  hourlyRate Float?
  dailyRate  Float?

  status      String  @default("AVAILABLE")
  description String?
  fuelType    String? @default("Petrol")

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  images   VehicleImage[]
  bookings Booking[]
  quotes   Quote[]
}

model VehicleImage {
  id        String   @id @default(cuid())
  url       String
  vehicle   Vehicle  @relation(fields: [vehicleId], references: [id], onDelete: Cascade)
  vehicleId String
  createdAt DateTime @default(now())
}
/**
 * ================= BOOKINGS =================
 */

model Booking {
  id        String  @id @default(cuid())
  userId    String
  vehicleId String
  vehicle   Vehicle @relation(fields: [vehicleId], references: [id])

  pickupDate  DateTime
  dropoffDate DateTime

  status      String @default("PENDING")
  totalAmount Float

  createdAt DateTime @default(now())
}

/**
 * ================= SERVICES =================
 */

enum PricingType {
  DISTANCE
  DAILY
  HOURLY
  PACKAGE
}

model Service {
  id          String  @id @default(cuid())
  name        String  @unique
  description String?

  pricingType PricingType
  basePrice   Float?

  active    Boolean  @default(true)
  createdAt DateTime @default(now())

  quotes Quote[]
}

/**
 * ================= ZONES =================
 */

model Zone {
  id          String   @id @default(cuid())
  name        String
  multiplier  Float    @default(1)
  extraFee    Float    @default(0)
  description String?
  createdAt   DateTime @default(now())
}

/**
 * ================= QUOTES =================
 */

model Quote {
  id String @id @default(cuid())

  firstName String
  lastName  String
  email     String
  phone     String

  pickupAddress      String
  destinationAddress String

  pickupDate  DateTime
  dropoffDate DateTime
  pickupTime  String

  passengers Int

  /**
   * ===== RELATIONS =====
   */

  serviceId String
  service   Service @relation(fields: [serviceId], references: [id])

  vehicleId String
  vehicle   Vehicle @relation(fields: [vehicleId], references: [id])

  /**
   * =====================
   */

  additionalRequirements String?

  distanceKm      Float
  durationMinutes Float
  zoneMultiplier  Float

  total         Float
  depositAmount Float

  createdAt DateTime @default(now())
}

/**
 * ================= INQUIRIES =================
 */

model Inquiry {
  id        String   @id @default(cuid())
  name      String
  email     String
  phone     String
  subject   String
  message   String
  createdAt DateTime @default(now())
}
